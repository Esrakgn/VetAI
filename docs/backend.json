{
  "entities": {
    "Alert": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Alert",
      "type": "object",
      "description": "Represents an alert generated due to anomalous behavior.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the alert.",
          "format": "uuid"
        },
        "animalId": {
          "type": "string",
          "description": "Reference to the Animal that triggered the alert. (Relationship: Animal 1:N Alert)"
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the alert was generated.",
          "format": "date-time"
        },
        "alertType": {
          "type": "string",
          "description": "Type of alert (e.g., Inactivity, Separation)."
        },
        "message": {
          "type": "string",
          "description": "Message associated with the alert."
        },
        "isResolved": {
          "type": "boolean",
          "description": "Indicates whether the alert has been resolved."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns the alert."
        },
        "severity": {
          "type": "string"
        },
        "description": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "animalId",
        "timestamp",
        "alertType",
        "message",
        "userId"
      ]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "users/{userId}/alerts/{alertId}",
        "definition": {
          "entityName": "Alert",
          "schema": {
            "$ref": "#/backend/entities/Alert"
          },
          "description": "Stores alert data for each animal, owned by the user. Supports the alert system and anomaly reporting. Includes denormalized 'userId' and 'animalId' for authorization independence.",
          "params": [
            {
              "name": "userId",
              "description": "The ID of the user who owns the animal."
            },
            {
              "name": "alertId",
              "description": "The unique ID of the alert."
            }
          ]
        }
      }
    ]
  }
}
